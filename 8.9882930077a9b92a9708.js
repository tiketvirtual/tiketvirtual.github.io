(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"9pLa":function(l,n,t){"use strict";t.r(n);var u=t("CcnG"),e=function(){return function(){}}(),a=t("pMnS"),s=t("Mr+X"),o=t("SMsm"),i=t("Ip0R"),c=t("FbN9"),r=t("8mMr"),b=t("dWZg"),m=t("k0Fy"),p=t("S36L"),d=function(){function l(l,n,t){this.fds=l,this.notify=n,this.location=t,this.itemTurn={},this.security="0",this.selService=!1,this.iconServType="add_shopping_cart",this.chats=[],this.dctoName=""}return l.prototype.ngOnInit=function(){var l=this;this.whoIAm=this.fds.itemClient.type,this.onChatNewData(this.fds.actualTurn.chatId),this.chatSubs=this.notify.getOneTurnObs(this.fds.actualTurn.myId).subscribe(function(n){"I"===n.event&&l.onChatNewData(n.chatId)})},l.prototype.onChatNewData=function(l){var n=this;this.fds.getChatInfo(l).then(function(l){var t=l.data();t&&t.stream&&(n.chats=JSON.parse(t.stream))})},l.prototype.ngOnDestroy=function(){this.onUnsubscribe()},l.prototype.onEvent=function(l){var n={};n.event=l,n.myId_server=this.itemTurn.myId_server,n.myId_turn=this.itemTurn.myId,this.fds.setWindLocalStat(!0,this.itemTurn.order),"D"===l&&(this.fds.setWindLocalStat(!0,this.itemTurn.order),n.stat=this.fds.getWindLocalStat(),n.request_myId=this.fds.itemClient.myId),this.fds.addEvent(n)},l.prototype.addPersonalInfo=function(){},l.prototype.onWriteMessage=function(){this.message=prompt("",""),""!==this.message&&(this.fds.chatEvent(this.chats,this.message,this.fds.actualTurn.myId_client===this.fds.itemClient.myId?"C":"W"),this.message="")},l.prototype.onUnsubscribe=function(){this.chatSubs.unsubscribe()},l}(),h=u.qb({encapsulation:0,styles:[['.fullexpand-container-chat[_ngcontent-%COMP%]{width:100%}p[_ngcontent-%COMP%]{font-size:1em}.mat-icon-button[_ngcontent-%COMP%], .mat-stroked-button[_ngcontent-%COMP%]{margin-bottom:10px;margin-right:8px}.gris[_ngcontent-%COMP%]{color:gray}.footer-chat[_ngcontent-%COMP%]{position:fixed;left:0;bottom:50px;width:100%;z-index:100}.chat-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}.chat-messages-holder[_ngcontent-%COMP%]{overflow-y:auto!important;overflow-x:hidden;height:550px;padding:5px 10px 10px}.chat-message[_ngcontent-%COMP%]{width:80%;-webkit-margin-before:5px;margin-block-start:5px;display:block;float:top;border-radius:3px;font-family:"Helvetica Meue",Helvetica,Arial,sans-serif;font-size:14px;border:1px solid gray}.message-right[_ngcontent-%COMP%]{background:#fbffca;margin-left:20%}.message-left[_ngcontent-%COMP%]{background:#d9f3db;right:20%}.message-center[_ngcontent-%COMP%]{right:10%;left:10%}.message-head[_ngcontent-%COMP%]{background-color:silver;width:100%}.msg-name[_ngcontent-%COMP%]{line-height:15px;font-weight:700;margin-left:5px}.msg-date[_ngcontent-%COMP%]{font-size:12px;color:#fff;margin-left:40%}.msg-msg[_ngcontent-%COMP%]{margin-left:30px;font-size:16px}']],data:{}});function g(l){return u.Lb(0,[(l()(),u.sb(0,0,null,null,7,"div",[["class","chat-message message-right"]],null,null,null,null,null)),(l()(),u.sb(1,0,null,null,5,"div",[["class","message-head"]],null,null,null,null,null)),(l()(),u.sb(2,0,null,null,1,"span",[["class","msg-name"]],null,null,null,null,null)),(l()(),u.Jb(-1,null,["T\xfa"])),(l()(),u.sb(4,0,null,null,2,"span",[["class","msg-date"]],null,null,null,null,null)),(l()(),u.Jb(5,null,["",""])),u.Fb(6,2),(l()(),u.sb(7,0,null,null,0,"div",[["class","msg-msg"]],[[8,"innerHTML",1]],null,null,null,null))],null,function(l,n){var t=u.Kb(n,5,0,l(n,6,0,u.Cb(n.parent.parent,0),n.parent.context.$implicit.date,"short"));l(n,5,0,t),l(n,7,0,n.parent.context.$implicit.msg)})}function f(l){return u.Lb(0,[(l()(),u.sb(0,0,null,null,7,"div",[["class","chat-message message-left"]],null,null,null,null,null)),(l()(),u.sb(1,0,null,null,5,"div",[["class","message-head"]],null,null,null,null,null)),(l()(),u.sb(2,0,null,null,1,"span",[["class","msg-name"]],null,null,null,null,null)),(l()(),u.Jb(3,null,["",""])),(l()(),u.sb(4,0,null,null,2,"span",[["class","msg-date"]],null,null,null,null,null)),(l()(),u.Jb(5,null,["",""])),u.Fb(6,2),(l()(),u.sb(7,0,null,null,0,"div",[["class","msg-msg"]],[[8,"innerHTML",1]],null,null,null,null))],null,function(l,n){l(n,3,0,n.parent.context.$implicit.user);var t=u.Kb(n,5,0,l(n,6,0,u.Cb(n.parent.parent,0),n.parent.context.$implicit.date,"short"));l(n,5,0,t),l(n,7,0,n.parent.context.$implicit.msg)})}function v(l){return u.Lb(0,[(l()(),u.sb(0,0,null,null,12,"div",[["class","chat-message message-right"]],null,null,null,null,null)),(l()(),u.sb(1,0,null,null,5,"div",[["class","message-head"]],null,null,null,null,null)),(l()(),u.sb(2,0,null,null,1,"span",[["class","msg-name"]],null,null,null,null,null)),(l()(),u.Jb(-1,null,["T\xfa"])),(l()(),u.sb(4,0,null,null,2,"span",[["class","msg-date"]],null,null,null,null,null)),(l()(),u.Jb(5,null,["",""])),u.Fb(6,2),(l()(),u.sb(7,0,null,null,5,"div",[["class","container"],["fxLayout","column"],["fxLayoutAlign","center center"]],null,null,null,null,null)),(l()(),u.sb(8,0,null,null,4,"button",[["color","primary"],["fxFlex","80%"],["mat-button",""]],null,[[null,"click"]],function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.onPdfDcto(l.parent.context.$implicit.msg)&&u),u},null,null)),(l()(),u.Jb(9,null,[" "," "])),(l()(),u.sb(10,0,null,null,2,"mat-icon",[["aria-label","document"],["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,s.b,s.a)),u.rb(11,9158656,null,0,o.b,[u.k,o.d,[8,null],[2,o.a]],null,null),(l()(),u.Jb(-1,0,["cloud_download"]))],function(l,n){l(n,11,0)},function(l,n){var t=n.component,e=u.Kb(n,5,0,l(n,6,0,u.Cb(n.parent.parent,0),n.parent.context.$implicit.date,"short"));l(n,5,0,e),l(n,9,0,t.dcto_name),l(n,10,0,u.Cb(n,11).inline,"primary"!==u.Cb(n,11).color&&"accent"!==u.Cb(n,11).color&&"warn"!==u.Cb(n,11).color)})}function x(l){return u.Lb(0,[(l()(),u.sb(0,0,null,null,12,"div",[["class","chat-message message-right"]],null,null,null,null,null)),(l()(),u.sb(1,0,null,null,5,"div",[["class","message-head"]],null,null,null,null,null)),(l()(),u.sb(2,0,null,null,1,"span",[["class","msg-name"]],null,null,null,null,null)),(l()(),u.Jb(-1,null,["T\xfa"])),(l()(),u.sb(4,0,null,null,2,"span",[["class","msg-date"]],null,null,null,null,null)),(l()(),u.Jb(5,null,["",""])),u.Fb(6,2),(l()(),u.sb(7,0,null,null,5,"div",[["class","container"],["fxLayout","column"],["fxLayoutAlign","space-between center"]],null,null,null,null,null)),(l()(),u.sb(8,0,null,null,4,"button",[["color","primary"],["fxFlex","40%"],["mat-button",""]],null,[[null,"click"]],function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.downloadFile(l.parent.context.$implicit.msg)&&u),u},null,null)),(l()(),u.Jb(-1,null,[" Hoja C\xe1lculo.csv "])),(l()(),u.sb(10,0,null,null,2,"mat-icon",[["aria-label","document"],["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,s.b,s.a)),u.rb(11,9158656,null,0,o.b,[u.k,o.d,[8,null],[2,o.a]],null,null),(l()(),u.Jb(-1,0,["save_alt"]))],function(l,n){l(n,11,0)},function(l,n){var t=u.Kb(n,5,0,l(n,6,0,u.Cb(n.parent.parent,0),n.parent.context.$implicit.date,"short"));l(n,5,0,t),l(n,10,0,u.Cb(n,11).inline,"primary"!==u.Cb(n,11).color&&"accent"!==u.Cb(n,11).color&&"warn"!==u.Cb(n,11).color)})}function C(l){return u.Lb(0,[(l()(),u.sb(0,0,null,null,8,"div",[],null,null,null,null,null)),(l()(),u.hb(16777216,null,null,1,null,g)),u.rb(2,16384,null,0,i.m,[u.Q,u.N],{ngIf:[0,"ngIf"]},null),(l()(),u.hb(16777216,null,null,1,null,f)),u.rb(4,16384,null,0,i.m,[u.Q,u.N],{ngIf:[0,"ngIf"]},null),(l()(),u.hb(16777216,null,null,1,null,v)),u.rb(6,16384,null,0,i.m,[u.Q,u.N],{ngIf:[0,"ngIf"]},null),(l()(),u.hb(16777216,null,null,1,null,x)),u.rb(8,16384,null,0,i.m,[u.Q,u.N],{ngIf:[0,"ngIf"]},null)],function(l,n){var t=n.component;l(n,2,0,n.context.$implicit.who==t.whoIAm),l(n,4,0,n.context.$implicit.who!=t.whoIAm),l(n,6,0,"P"===n.context.$implicit.who),l(n,8,0,"J"===n.context.$implicit.who)},null)}function y(l){return u.Lb(0,[u.Db(0,i.e,[u.v]),u.Hb(671088640,1,{chatBox:0}),(l()(),u.sb(2,0,null,null,7,"div",[["class","chat-wrapper"]],null,null,null,null,null)),(l()(),u.sb(3,0,[[1,0],["chatbox",1]],null,6,"div",[["class","chat-messages-holder"]],[[8,"scrollTop",0]],null,null,null,null)),(l()(),u.hb(16777216,null,null,1,null,C)),u.rb(5,278528,null,0,i.l,[u.Q,u.N,u.t],{ngForOf:[0,"ngForOf"]},null),(l()(),u.sb(6,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),u.sb(7,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),u.sb(8,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),u.sb(9,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),u.sb(10,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),u.sb(11,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),u.sb(12,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),u.sb(13,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),u.sb(14,0,null,null,8,"mat-toolbar",[["class","footer mat-toolbar"]],[[2,"mat-toolbar-multiple-rows",null],[2,"mat-toolbar-single-row",null]],null,null,c.b,c.a)),u.rb(15,4243456,null,1,r.a,[u.k,b.a,i.d],null,null),u.Hb(603979776,2,{_toolbarRows:1}),(l()(),u.sb(17,0,null,0,1,"div",[["class","fullexpand-container-ttl box-inputtext"],["tappable",""]],null,[[null,"click"]],function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.onWriteMessage()&&u),u},null,null)),(l()(),u.Jb(-1,null,[" Escriba su mensaje... "])),(l()(),u.Jb(-1,0,[" \xa0 "])),(l()(),u.sb(20,0,null,0,2,"mat-icon",[["class","secondary_accent mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],[[null,"tap"]],function(l,n,t){var u=!0;return"tap"===n&&(u=!1!==l.component.addPersonalInfo()&&u),u},s.b,s.a)),u.rb(21,9158656,null,0,o.b,[u.k,o.d,[8,null],[2,o.a]],null,null),(l()(),u.Jb(-1,0,["person"]))],function(l,n){l(n,5,0,n.component.chats),l(n,21,0)},function(l,n){l(n,3,0,u.Cb(n,3).scrollHeight),l(n,14,0,u.Cb(n,15)._toolbarRows.length>0,0===u.Cb(n,15)._toolbarRows.length),l(n,20,0,u.Cb(n,21).inline,"primary"!==u.Cb(n,21).color&&"accent"!==u.Cb(n,21).color&&"warn"!==u.Cb(n,21).color)})}function w(l){return u.Lb(0,[(l()(),u.sb(0,0,null,null,1,"app-chat",[],null,null,null,y,h)),u.rb(1,245760,null,0,d,[m.a,p.a,i.i],null,null)],function(l,n){l(n,1,0)},null)}var _=u.ob("app-chat",d,w,{},{},[]),I=t("ZYCi"),M=function(){return function(){}}(),O=t("Fzqc"),k=t("Wf4p"),P=t("ZYjt");t.d(n,"ChatModuleNgFactory",function(){return J});var J=u.pb(e,[],function(l){return u.zb([u.Ab(512,u.j,u.cb,[[8,[a.a,_]],[3,u.j],u.y]),u.Ab(4608,i.o,i.n,[u.v,[2,i.D]]),u.Ab(1073742336,i.b,i.b,[]),u.Ab(1073742336,I.l,I.l,[[2,I.q],[2,I.k]]),u.Ab(1073742336,M,M,[]),u.Ab(1073742336,O.a,O.a,[]),u.Ab(1073742336,k.j,k.j,[[2,k.c],[2,P.f]]),u.Ab(1073742336,o.c,o.c,[]),u.Ab(1073742336,r.b,r.b,[]),u.Ab(1073742336,e,e,[]),u.Ab(1024,I.i,function(){return[[{path:"",component:d}]]},[])])})}}]);